<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
	<h:form>
	<h:dataTable value="#{estim.companies}" var="o"
		class="table table-striped dataTable" id="example3"
		aria-describedby="example2_info" headerClass="statBean-table-header"
		rowClasses="statBean-table-odd-row,statBean-table-even-row">

		<h:column>

			<f:facet name="header" class="sorting" role="columnheader"
				tabindex="0" aria-controls="example2" rowspan="1" colspan="1"
				style="width: 164px;"
				aria-label="Rendering engine: activate to sort column ascending">Company Name</f:facet>
			<div id="Parks" class="just list">
				<ul style="">
					<li class="mix alaska camping climbing fishing mix_all"
						data-name="Denali" data-area="4740911.37"
						style="display: block; opacity: 1;">

						<div class="meta name">
							<div class="img_wrapper">
								<h:graphicImage value="#{o.logo}" />
							</div>
							<div class="titles">
								<h2>
									<h:outputText value="#{o.name}" />
								</h2>
								<p>
									<em><h:outputText value="#{o.sector.name}" /></em>
								</p>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</h:column>

		<h:column>

			<f:facet name="header">Closing price</f:facet>
			<div id="Parks" class="just list">
				<ul style="">
					<li class="mix alaska camping climbing fishing mix_all"
						data-name="Denali" data-area="4740911.37"
						style="display: block; opacity: 1;">
						<div class="meta region">
							<p>
								<h:outputText value="#{o.quotation.closingPrice} TND" />
							</p>
						</div>
					</li>
				</ul>
			</div>
		</h:column>

		<h:column>

			<f:facet name="header">Estimation</f:facet>
			<div id="Parks" class="just list">
				<ul style="">
					<li class="mix alaska camping climbing fishing mix_all"
						data-name="Denali" data-area="4740911.37"
						style="display: block; opacity: 1;">
						<div class="meta rec">
							<p>
								<h:outputText value="#{o.quotation.estimation} %" />
							</p>
						</div>
					</li>
				</ul>
			</div>
		</h:column>

		<h:column>

			<f:facet name="header">New estimation</f:facet>
			<div id="Parks" class="just list">
				<ul style="">
					<li class="mix alaska camping climbing fishing mix_all"
						data-name="Denali" data-area="4740911.37"
						style="display: block; opacity: 1;">
						<div class="meta area">
						
								<p>
									<h:inputText class="form-control" data-v-max="9999"
										data-v-min="0" value="#{o.quotation.estimation}" />
									<br />

									<h:commandLink
										class="btn btn-danger dropdown-toggle btn-demo-space "
										action="#{estim.doUpdatedec(o.quotation)}">
										<i class="fa fa-arrow-down"></i>
										<span class="bold">Decrease</span>
									</h:commandLink>

									<h:commandLink
										class="btn btn-primary dropdown-toggle btn-demo-space"
										action="#{estim.doUpdate(o.quotation)}">
										<i class="fa fa-arrow-up"></i>
										<span class="bold">Increase</span>
									</h:commandLink>
								</p>
							
						</div>
					</li>
				</ul>
			</div>
		</h:column>
		<h:column>

			<f:facet name="header">New estimation</f:facet>
			<div id="Parks" class="just list">
				<ul style="">
					<li class="mix alaska camping climbing fishing mix_all"
						data-name="Denali" data-area="4740911.37"
						style="display: block; opacity: 1;">
						<div class="meta area">

							<p>
								<h:inputText class="form-control" data-v-max="9999"
									data-v-min="0" value="#{o.quotation.estimation}" />
								<br />
								
									<h:commandButton p:onclick="#{estim.openModal(o)}"
										class="btn btn-lg" p:data-toggle="modal"
										p:data-target="#myModal" type="button" value="Launch demo modal "> 
          <f:setPropertyActionListener value="o"
											target="#{estim.selectedCompnay}"></f:setPropertyActionListener>
									</h:commandButton>
								

							</p>

						</div>
					</li>
				</ul>
			</div>
		</h:column>


	</h:dataTable></h:form>
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<div class="row form-row">
						<div class="col-md-8"></div>
						<div class="col-md-4"></div>
					</div>
					<div class="row form-row">
						<div class="col-md-12"></div>
					</div>
					<div class="row form-row">
						<div class="col-md-6">#{estim.selectedCompnay.name}</div>
						<div class="col-md-6"></div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>

</ui:composition>